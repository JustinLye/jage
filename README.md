# JAGE (Just Another Game Engine)

JAGE is primarily a sandbox to experiment with C++ and other software, with a focus on foundational game engine building blocks. The core library is header-only and is exercised by a minimal GLFW demo app.

## Features
- Game loop and window abstraction (`jage::game`, `jage::window`) driven by a user-provided driver.
- Input system with keyboard, mouse, and cursor monitors; fixed-capacity callbacks; per-button state tracking.
- Time utilities: real-number durations, `hertz` literal, steady clock with time scaling, and snapshot reporting.
- Concurrency: cacheline-aligned double buffer for single-writer/single-reader data handoff.
- Containers: cacheline-aware SPSC queue that overwrites the oldest element when full.
- Memory helpers: cacheline size constant and `cacheline_slot` to pad and align values.

## Build (Dev Containers preferred)
Dev Containers are the happy path for local development. You get the exact toolchain and deps used in CI, with minimal fuss.

### Dev Containers (VS Code)
1. Open the repo in VS Code.
2. Run "Dev Containers: Reopen in Container".
3. Use the integrated terminal for build/test commands (you still run `conan install` inside the container).

### Dev Containers (CLI)
Prereqs: Docker, Node.js, npm.

```bash
sudo npm install -g @devcontainers/cli
devcontainer build --workspace-folder /path/to/jage
devcontainer up --workspace-folder /path/to/jage
devcontainer exec --workspace-folder /path/to/jage -- bash
```
Then run the usual `conan install` and CMake commands from inside the container shell.

### Build (Conan + CMake)
Prereqs: CMake 3.28+, Conan v2, a C++23 compiler, and Python.

```bash
python3 -m venv conan
source conan/bin/activate
pip install conan
conan install . -pr:a profiles/linux -pr:a profiles/gcc -pr:a profiles/debug --build=missing
cmake --preset conan-build-linux-gcc-debug
cmake --build build --target jage
```

Run the demo app:

```bash
./build/jage
```

## Tests
Preferred: run these inside the Dev Container so your environment matches CI.

```bash
cmake --build build --target run-all-jage-unit-tests
```

## Coverage
Preferred: run coverage inside the Dev Container to avoid toolchain mismatches.

```bash
conan install . -pr:a profiles/coverage -pr:a profiles/linux -pr:a profiles/gcc -pr:a profiles/debug --build=missing
cmake --preset conan-build-linux-gcc-debug
cmake --build build --target coverage
```

Coverage HTML is generated in `build/coverage-report`.

## Presets 101
Presets are generated by Conan and then included by your local
`CMakeUserPresets.json` (ignored by git). Run `conan install` first, then pick
a preset.

Command line:

```bash
cmake --list-presets
cmake --preset conan-build-linux-gcc-debug
cmake --build build
```

VS Code (CMake Tools):
1. Run “CMake: Select Configure Preset”.
2. Pick a `conan-build-*` preset.
3. Run “CMake: Configure” then “CMake: Build”.

If no presets show up, it usually means `conan install` hasn’t been run for
that profile yet.

## Project layout
- `include/`: header-only library code
- `app/`: GLFW demo app entry point
- `test/`: unit tests and test helpers
- `cmake/`: compiler options, coverage helpers, and GUnit fetch
- `profiles/`: Conan profiles for toolchains and sanitizers
- `docker/`: devcontainer image

## Dependencies
Core build uses:
- glad
- glfw3
- glm
- range-v3

Testing uses:
- GUnit (GoogleTest/GoogleMock)

Conan recipe lists:
- glad
- glfw
- glm
- gtest
- range-v3
- assimp
