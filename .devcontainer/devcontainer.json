{
  "name": "jage-dev",
  "build": {
    "dockerfile": "../docker/Dockerfile",
    "context": "..",
    "args": {
      "USERNAME": "vscode"
    }
  },
  "remoteUser": "vscode",
  "containerUser": "root",
  "overrideCommand": false,
  "updateRemoteUserUID": true,
  "workspaceFolder": "/workspaces/jage",
  "features": {},
  "runArgs": [
    "--security-opt=seccomp=${localWorkspaceFolder}/.devcontainer/seccomp-personality.json"
  ],
  "postCreateCommand": "python3 -m venv .conan && ./.conan/bin/python -m pip install black && direnv reload",
  "customizations": {
    "vscode": {
      "settings": {
        "terminal.integrated.defaultProfile.linux": "bash",
        "C_Cpp.autocomplete": "disabled",
        "C_Cpp.intelliSenseEngine": "disabled",
        "C_Cpp.errorSquiggles": "disabled",
        "C_Cpp.default.configurationProvider": "ms-vscode.cmake-tools",
        "clangd.path": "/usr/bin/clangd",
        "clangd.arguments": [
          "--background-index",
          "--compile-commands-dir=${workspaceFolder}/build",
          "--header-insertion=never",
          "-j=8",
          "--malloc-trim",
          "--pch-storage=memory",
          "--clang-tidy",
          "--enable-config"
        ],
        "cmake.configureOnOpen": false,
        "cmake.sourceDirectory": "${workspaceFolder}",
        "cmake.configureOnEdit": true,
        "editor.renderWhitespace": "all",
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "llvm-vs-code-extensions.vscode-clangd",
        "[c]": {
          "editor.defaultFormatter": "llvm-vs-code-extensions.vscode-clangd"
        },
        "[cpp]": {
          "editor.defaultFormatter": "llvm-vs-code-extensions.vscode-clangd"
        },
        "cmake.options.statusBarVisibility": "visible",
        "C_Cpp.default.intelliSenseMode": "linux-gcc-x86",
        "[python]": {
          "editor.defaultFormatter": "ms-python.black-formatter"
        },
        "dev.containers.showTerminal": "never"
        ,
        "python.defaultInterpreterPath": "${workspaceFolder}/.conan/bin/python",
        "python.analysis.typeCheckingMode": "strict"
      },
      "extensions": [
        "ms-vscode.cmake-tools",
        "ms-vscode.cpptools",
        "ms-python.black-formatter",
        "ms-python.python",
        "ms-python.vscode-pylance",
        "llvm-vs-code-extensions.vscode-clangd",
        "xaver.clang-format",
        "openai.chatgpt"
      ]
    }
  },
  "mounts": [
    "source=jage-vscode-ext,target=/home/vscode/.vscode-server/extensions,type=volume",
    "source=jage-conan,target=/home/vscode/.conan2,type=volume",
    "source=jage-cache,target=/home/vscode/.cache,type=volume",
    "source=jage-local,target=/home/vscode/.local,type=volume",
    "source=${localWorkspaceFolder}/journal,target=/home/vscode/journal,type=bind",
    "source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind"
  ]
}
